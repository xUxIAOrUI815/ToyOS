/* os/kernel.ld */
OUTPUT_ARCH(riscv)
ENTRY(_start)

BASE_ADDRESS = 0x80200000;

SECTIONS
{
    . = BASE_ADDRESS;

    /* ä»£ç æ®µ */
    /* ğŸ”´ã€ä¿®æ”¹ã€‘å¯¼å‡º stext (Start Text) */
    stext = .;
    .text : {
        *(.text.entry)  /* entry.S å¿…é¡»æ”¾æœ€å‰é¢ */
        *(.text .text.*)
        /* ğŸ”´ã€æ–°å¢ã€‘æŠŠ trampoline (Trapå…¥å£) å¯¹é½åˆ°é¡µè¾¹ç•Œï¼Œæ–¹ä¾¿æ˜ å°„ */
        . = ALIGN(4096);
        tramp_start = .;
        *(.text.trampoline)
        . = ALIGN(4096);
        tramp_end = .;
    }
    . = ALIGN(4096);
    /* ğŸ”´ã€ä¿®æ”¹ã€‘å¯¼å‡º etext (End Text) */
    etext = .;

    .rodata : {
        *(.rodata .rodata.*)
        *(.srodata .srodata.*)
    }
    . = ALIGN(4096);
    /* ğŸ”´ã€ä¿®æ”¹ã€‘å¯¼å‡º erodata */
    erodata = .;

    /* æ•°æ®æ®µ (å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡) */
    .data : {
        *(.data .data.*)
    }

    /* BSSæ®µ */
    .bss : {
        . = ALIGN(8);
        sbss = .;      /* BSS å¼€å§‹ */
        *(.bss .bss.*)
        *(.sbss .sbss.*)
        . = ALIGN(8);
        ebss = .;      /* BSS ç»“æŸ */
    }

    /* å®šä¹‰å†…æ ¸ç»“æŸçš„åœ°å€ */
    . = ALIGN(4096);
    ekernel = .;
}